#!/bin/bash
resize -s 40 130 >/dev/null 2>&1


PS3=$'\n\033[1;36mPlease select an option:\033[0m '

source functions

# === Main Fancy Menu ===
while true; do
    CHOICE=$(whiptail --title "üöÄ Admin Panel - User & Group Manager" \
        --backtitle "												üîß Bash Project | by Elham Hasan System Admin and DevOps" \
	--menu "Choose an action:" 40 120 20 \
       "1" "‚ûï Add User" \
        "2" "üóëÔ∏è Delete User" \
        "3" "‚úèÔ∏è Modify User" \
        "4" "üìã List All Users" \
        "5" "üë§ View Specific User" \
        "6" "‚ûï Add Group" \
        "7" "‚úèÔ∏è Modify Group" \
        "8" "üìã List Groups" \
        "9" "‚úÖ Enable User" \
        "10" "üö´ Disable User" \
        "11" "üóëÔ∏è Delete Group" \
        "12" "üîí Change Password" \
        "13" "‚ùå Exit" 3>&1 1>&2 2>&3)

    exitstatus=$?
   if [ $exitstatus != 0 ]; then
    	 whiptail --title "üëã Exit" --msgbox "Operation cancelled. Goodbye!" 10 50
    	sleep 1
    	clear
    	exit
    fi


    case $CHOICE in
        1) AddUser ;;
        2) DeleteUser ;;
        3) ModifyUser ;;
        4) ListUsers ;;
        5) ListUser ;;
        6) AddGroup ;;
        7) ModifyGroup ;;
        8) ListGroups ;;
        9) EnableUser ;;
        10) DisableUser ;;
        11) DeleteGroup ;;
        12) ChangePassword ;;
        13)
            whiptail --title "üëã Exit" --msgbox "Thank you for using this tool. See you soon!" 10 50
            exit ;;
        *)
            whiptail --title "‚ö†Ô∏è Invalid" --msgbox "Unknown option selected!" 10 50 ;;
    esac
done
